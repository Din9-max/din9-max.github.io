<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AR Santa Hat</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: black;
            touch-action: none;
        }
        
        #webcam {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1); /* –ó–µ—Ä–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã */
        }
        
        #output {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
        
        .controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 20px 10px;
            z-index: 10;
        }
        
        .controls-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        button {
            background: #ff0000;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 0;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            min-width: 120px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }
        
        button:active {
            transform: scale(0.95);
            background: #cc0000;
        }
        
        #stop {
            background: #333;
        }
        
        #stop:active {
            background: #222;
        }
        
        #switch {
            background: #0066cc;
        }
        
        #switch:active {
            background: #0055aa;
        }
        
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            z-index: 100;
            padding: 20px;
        }
        
        .start-screen h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ff4444;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .start-screen p {
            font-size: 1.2em;
            margin-bottom: 20px;
            max-width: 90%;
            line-height: 1.5;
        }
        
        .instructions {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            max-width: 90%;
        }
        
        #startMain {
            background: linear-gradient(to right, #ff4444, #ff0000);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 6px 12px rgba(255,0,0,0.3);
            font-weight: bold;
        }
        
        #startMain:active {
            transform: scale(0.95);
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2em;
            z-index: 5;
        }
        
        @media (max-width: 768px) {
            button {
                padding: 10px 20px;
                min-width: 100px;
                font-size: 14px;
            }
            
            .controls {
                padding: 15px 10px;
            }
            
            .start-screen h1 {
                font-size: 2em;
            }
            
            .start-screen p {
                font-size: 1em;
            }
        }
        
        @media (max-height: 600px) {
            .start-screen h1 {
                font-size: 1.8em;
                margin-bottom: 10px;
            }
            
            .start-screen p {
                font-size: 0.9em;
                margin-bottom: 10px;
            }
            
            #startMain {
                padding: 12px 30px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="start-screen" id="startScreen">
        <h1>üéÖ AR –®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã</h1>
        <p>–ù–∞–¥–µ–Ω—å—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —à–∞–ø–∫—É –°–∞–Ω—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!</p>
        <div class="instructions">
            <p>1. –ù–∞–∂–º–∏—Ç–µ "–ù–ê–ß–ê–¢–¨"</p>
            <p>2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ</p>
            <p>3. –°–º–æ—Ç—Ä–∏—Ç–µ –≤ –∫–∞–º–µ—Ä—É</p>
            <p>4. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å! üéÑ</p>
        </div>
        <button id="startMain">–ù–ê–ß–ê–¢–¨</button>
    </div>
    
    <div class="loading" id="loading" style="display: none;">
        –ó–∞–≥—Ä—É–∑–∫–∞...
    </div>
    
    <video id="webcam" autoplay playsinline muted></video>
    <canvas id="output"></canvas>
    
    <div class="controls" style="display: none;" id="controlsDiv">
        <div class="controls-buttons">
            <button id="start">–°–¢–ê–†–¢</button>
            <button id="stop">–°–¢–û–ü</button>
            <button id="switch">–ö–ê–ú–ï–†–ê</button>
        </div>
        <div style="font-size: 14px; opacity: 0.8;">AR –®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã üéÖ</div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const video = document.getElementById('webcam');
        const canvas = document.getElementById('output');
        const ctx = canvas.getContext('2d');
        const startButton = document.getElementById('start');
        const stopButton = document.getElementById('stop');
        const switchButton = document.getElementById('switch');
        const startScreen = document.getElementById('startScreen');
        const controlsDiv = document.getElementById('controlsDiv');
        const startMainButton = document.getElementById('startMain');
        const loading = document.getElementById('loading');
        
        let currentStream;
        let isRunning = false;
        let cameraInstance = null;
        let isFrontCamera = true;
        let animationId = null;
        
        // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à–∞–ø–∫–∏
        let hatImage = new Image();
        hatImage.src = 'my_hat.png';
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å Face Mesh
        const faceMesh = new FaceMesh({
            locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`;
            }
        });
        
        faceMesh.setOptions({
            maxNumFaces: 1,
            refineLandmarks: true,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });
        
        faceMesh.onResults(onResults);
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        async function startCamera(facingMode = 'user') {
            try {
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã
                const constraints = {
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        frameRate: { ideal: 30 }
                    },
                    audio: false
                };
                
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    constraints.video.width = { ideal: 640 };
                    constraints.video.height = { ideal: 480 };
                    constraints.video.frameRate = { ideal: 24 };
                }
                
                currentStream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = currentStream;
                
                return new Promise((resolve) => {
                    video.onloadedmetadata = () => {
                        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä canvas –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ
                        const videoWidth = video.videoWidth;
                        const videoHeight = video.videoHeight;
                        
                        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–¥–≥–æ–Ω—è–µ–º –ø–æ–¥ —ç–∫—Ä–∞–Ω
                        if (window.innerHeight > window.innerWidth) {
                            // –ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
                            canvas.width = Math.min(videoWidth, window.innerWidth);
                            canvas.height = canvas.width * (videoHeight / videoWidth);
                        } else {
                            // –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
                            canvas.width = window.innerWidth;
                            canvas.height = window.innerHeight;
                        }
                        
                        // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º canvas
                        canvas.style.width = '100%';
                        canvas.style.height = '100%';
                        canvas.style.objectFit = 'cover';
                        
                        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∑–µ—Ä–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã
                        if (facingMode === 'user') {
                            video.style.transform = 'scaleX(-1)';
                        } else {
                            video.style.transform = 'scaleX(1)';
                        }
                        
                        isFrontCamera = (facingMode === 'user');
                        resolve();
                    };
                });
            } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –∫–∞–º–µ—Ä—ã:", err);
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.");
                return Promise.reject(err);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function onResults(results) {
            ctx.save();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –†–∏—Å—É–µ–º –≤–∏–¥–µ–æ —Å —É—á–µ—Ç–æ–º –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
            if (isFrontCamera) {
                // –î–ª—è —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã - –∑–µ—Ä–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                ctx.translate(canvas.width, 0);
                ctx.scale(-1, 1);
                ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);
                ctx.setTransform(1, 0, 0, 1, 0, 0); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
            } else {
                // –î–ª—è –∑–∞–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã - –∫–∞–∫ –µ—Å—Ç—å
                ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);
            }
            
            if (results.multiFaceLandmarks && results.multiFaceLandmarks.length > 0) {
                for (const landmarks of results.multiFaceLandmarks) {
                    // –ù–∞—Ö–æ–¥–∏–º —Ç–æ—á–∫–∏ –ª–∏—Ü–∞ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–ø–∫–∏
                    const forehead = landmarks[10];  // —Ç–æ—á–∫–∞ –Ω–∞ –ª–±—É
                    const leftTemple = landmarks[234];
                    const rightTemple = landmarks[454];
                    
                    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã canvas
                    const canvasWidth = canvas.width;
                    const canvasHeight = canvas.height;
                    
                    let foreheadX, foreheadY, leftX, rightX;
                    
                    if (isFrontCamera) {
                        // –î–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º X –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
                        foreheadX = (1 - forehead.x) * canvasWidth;
                        foreheadY = forehead.y * canvasHeight;
                        leftX = (1 - leftTemple.x) * canvasWidth;
                        rightX = (1 - rightTemple.x) * canvasWidth;
                    } else {
                        foreheadX = forehead.x * canvasWidth;
                        foreheadY = forehead.y * canvasHeight;
                        leftX = leftTemple.x * canvasWidth;
                        rightX = rightTemple.x * canvasWidth;
                    }
                    
                    const faceWidth = Math.abs(rightX - leftX);
                    
                    // –†–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è —à–∞–ø–∫–∏
                    const hatWidth = faceWidth * 1.8;
                    const hatHeight = hatWidth * 0.67;
                    
                    const hatX = foreheadX - hatWidth / 2;
                    const hatY = foreheadY - hatHeight * 0.6;
                    
                    // –†–∏—Å—É–µ–º —à–∞–ø–∫—É
                    if (hatImage.complete) {
                        ctx.save();
                        if (isFrontCamera) {
                            // –î–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —à–∞–ø–∫–∏ —Ç–æ–∂–µ
                            ctx.translate(canvasWidth, 0);
                            ctx.scale(-1, 1);
                            ctx.drawImage(hatImage, canvasWidth - hatX - hatWidth, hatY, hatWidth, hatHeight);
                        } else {
                            ctx.drawImage(hatImage, hatX, hatY, hatWidth, hatHeight);
                        }
                        ctx.restore();
                    }
                }
            }
            
            ctx.restore();
            
            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä
            if (isRunning) {
                animationId = requestAnimationFrame(() => {
                    if (video.readyState >= video.HAVE_ENOUGH_DATA) {
                        faceMesh.send({image: video});
                    }
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        async function startProcessing() {
            if (!isRunning) {
                isRunning = true;
                startButton.textContent = "–ü–ê–£–ó–ê";
                startButton.style.background = "#ff9900";
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–¥—Ä–æ–≤
                if (video.readyState >= video.HAVE_ENOUGH_DATA) {
                    animationId = requestAnimationFrame(() => {
                        faceMesh.send({image: video});
                    });
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        function stopProcessing() {
            if (isRunning) {
                isRunning = false;
                startButton.textContent = "–°–¢–ê–†–¢";
                startButton.style.background = "#ff0000";
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        startMainButton.onclick = async () => {
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                startScreen.style.display = 'none';
                loading.style.display = 'block';
                
                // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫—É
                await new Promise(resolve => setTimeout(resolve, 100));
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–∞–º–µ—Ä—É
                await startCamera();
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                loading.style.display = 'none';
                controlsDiv.style.display = 'block';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
                await startProcessing();
            } catch (err) {
                // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω —Å–Ω–æ–≤–∞
                loading.style.display = 'none';
                startScreen.style.display = 'flex';
                controlsDiv.style.display = 'none';
                console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞:", err);
            }
        };
        
        startButton.onclick = async () => {
            if (isRunning) {
                stopProcessing();
            } else {
                await startProcessing();
            }
        };
        
        stopButton.onclick = () => {
            stopProcessing();
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
                currentStream = null;
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
            controlsDiv.style.display = 'none';
            startScreen.style.display = 'flex';
            isRunning = false;
        };
        
        switchButton.onclick = async () => {
            try {
                const facingMode = isFrontCamera ? 'environment' : 'user';
                
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
                stopProcessing();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                controlsDiv.style.display = 'none';
                loading.style.display = 'block';
                
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–∞–º–µ—Ä—É
                await startCamera(facingMode);
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                loading.style.display = 'none';
                controlsDiv.style.display = 'block';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–Ω–æ–≤–∞
                await startProcessing();
            } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã:", err);
                loading.style.display = 'none';
                controlsDiv.style.display = 'block';
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É");
            }
        };
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —à–∞–ø–∫–∏
        hatImage.onerror = () => {
            console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —à–∞–ø–∫–∏");
            // –°–æ–∑–¥–∞–µ–º fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            hatImage.src = 'my_hat.png';
        };
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
        window.addEventListener('resize', () => {
            if (currentStream && video.videoWidth) {
                const videoWidth = video.videoWidth;
                const videoHeight = video.videoHeight;
                
                if (window.innerHeight > window.innerWidth) {
                    canvas.width = Math.min(videoWidth, window.innerWidth);
                    canvas.height = canvas.width * (videoHeight / videoWidth);
                } else {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                }
            }
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∂–µ—Å—Ç–æ–≤
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        // –û—Ç–∫–ª—é—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
